/**
 *
 * GetSelfData main.js
 * author : SRM_XY Yeuoly
 * Copyright : VSOV-2018-2019
 * Editor by IDEA and VSCODE
 * Thanks to Vue.js
 *
 * */function InitWeb(){var f=this;var h={isOnline:function(){return f.constDom.menu.user.online},openBlackCover:function(){var b=document.getElementById("black-cover");b.style.setProperty("z-index","1");var a=setInterval(function(){var c=h.getBlackCoverOpacity();h.setBlackCoverOpacity(c+0.06);if(c>=static_data.userblock.m_MAX_BLACK_COVER_OPACITY-0.06){clearInterval(a)}},10)},closeBlackCover:function(){var b=document.getElementById("black-cover");var a=setInterval(function(){var c=h.getBlackCoverOpacity();h.setBlackCoverOpacity(c-0.06);if(c<=static_data.userblock.m_MIN_BLACK_COVER_OPACITY+0.06){b.style.setProperty("z-index","-1");clearInterval(a)}},10)},openSideMenu:function(){var b=document.getElementById("user-menu");var a=setInterval(function(){var c=h.getMenuLeft();h.setMenuLeft(c+10);var d=static_data.userblock.m_MAX_MENU_LEFT-20;if(c>=d){clearInterval(a);h.setMenuLeft(0);b.style.setProperty("box-shadow","2px 0px 1px rgb(173, 150, 150)")}},3)},closeSideMenu:function(){var a=document.getElementById("user-menu");a.style.setProperty("box-shadow","0px 0px 0px rgb(173, 150, 150)");var c=h.getMenuWidth();var b=setInterval(function(){var d=h.getMenuLeft();var e=d+c;if(e<=0){clearInterval(b);return}h.setMenuLeft(d-10)},3)},goToIndex:function(){location.href=static_data.getUrlPath("",static_data.m_URL_DOMAIN_WEB_DIR)},goToMyIndex:function(){location.href=static_data.getUrlPath("msg.html",static_data.m_URL_DOMAIN_WEB_DIR)},goToUpdateLog:function(){location.href=static_data.getUrlPath("#updates-log-list",static_data.m_URL_DOMAIN_WEB_DIR)},goToLogin:function(){location.href=static_data.getUrlPath("passport.html",static_data.m_URL_DOMAIN_WEB_DIR)},goToSendPost:function(){location.href=static_data.getUrlPath("operate/editor-post.html",static_data.m_URL_DOMAIN_WEB_DIR)},logOff:function(){if(f.constDom.menu.user.online){$.ajax({url:static_data.getUrlPath("LogOff.php",static_data.m_URL_DOMAIN_API_DIR),async:true,type:"get",dataType:"json",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:true},success:function(a){if(a.data["res"]===static_data.response.passjct.success){h.clearUserInfo()}}})}},setUserInfo:function(b,a){f.constDom.menu.user[b]=a},setUserInfoArray:function(a){for(var b in a){f.functionGroup.setUserInfo(b,a[b])}},clearUserInfo:function(){f.constDom.menu.user={user_id:"未登录，点击登录",user_uid:"-1",user_email:"example@google.com",user_lv:"0",user_exp:"0",user_class:"",avatar:"https://img.srmxy.cn/ylday/avatar/default.webp",srm_jct:"",login_time:"0",online:false}},passJct:function(){var a=this;$.ajax({url:static_data.getUrlPath("User.php",static_data.m_URL_DOMAIN_API_DIR),async:true,type:"post",dataType:"json",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:true},success:function(b){if(b.data["res"]===static_data.response.passjct.success){a.setUserInfoArray(b.data["data"]);a.setUserInfo("online",true);a.setUserInfo("avatar",static_data.getUrlPath("avatar/"+b.data["data"]["user_uid"]+".jpg",static_data.m_URL_DOMAIN_IMG_DIR));var c=$("#menu-user-block-id-txt");c.css("cursor","default");for(var d in i.userOnloadNextTick){i.userOnloadNextTick[d]()}}}})},bindUserOnloadNextTick:function(a){if(typeof a==="function"){i.userOnloadNextTick.push(a)}else{console.error("userOnloadNextTick : wrong type")}},unbindUserOnloadNextTick:function(){i.userOnloadNextTick=[]},getUserInfo:function(a){if(typeof a==="undefined"){return f.constDom.menu.user}if(typeof f.constDom.menu.user[a]!=="undefined"){return f.constDom.menu.user[a]}console.error("illegal index in getUserInfo(index)")},isPC:function(){var d=navigator.userAgent;var a=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"];var c=true;for(var b=0;b<a.length;b++){if(d.indexOf(a[b])>0){c=false;break}}return c},getParamsArray:function(){var d=document.location.toString();var m=d.split("?")[1];if(typeof m==="undefined"){return}var b=m.split("&");var a=[];for(var c in b){var e=b[c].split("=");a[e[0]]=e[1];a.length++}return a},alertBox:function(z,u){z=z||"";u=u||0;var b=document.body.scrollTop||document.documentElement.scrollTop;var B=(document.all)?true:false;var w=B&&!window.XMLHttpRequest;var a=document.documentElement.scrollTop||document.body.scrollTop;var c=document.documentElement.scrollLeft||document.body.scrollLeft;var t=function(){var k,o,m,p,n,l;if(window.innerHeight&&window.scrollMaxY){k=document.body.scrollWidth;o=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){k=document.body.scrollWidth;o=document.body.scrollHeight}else{k=document.body.offsetWidth;o=document.body.offsetHeight}}if(self.innerHeight){m=self.innerWidth;p=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){m=document.documentElement.clientWidth;p=document.documentElement.clientHeight}else{if(document.body){m=document.body.clientWidth;p=document.body.clientHeight}}}if(o<p){l=p}else{l=o}if(k<m){n=m}else{n=k}return{pageWidth:n,pageHeight:l,windowWidth:m,windowHeight:p}}();var d="display:block;position:fixed;_position:absolute;left:"+(t.windowWidth/2-200)+"px;top:"+(t.windowHeight/2-150)+"px;_top:"+(t.windowHeight/2+b-150)+"px;";var v=document.createElement("div");v.id="alertMsg";v.style.cssText=d;var x=document.createElement("P");x.id="alertMsg_info";x.innerHTML=z;v.appendChild(x);var y=document.createElement("a");y.id="alertMsg_btn1";y.href="javascript:void(0)";y.innerHTML="<cite>确定</cite>";y.onclick=function(){e();return true};v.appendChild(y);if(u===1){var A=document.createElement("a");A.id="alertMsg_btn2";A.href="javascript:void(0)";A.innerHTML="<cite>取消</cite>";A.onclick=function(){e();return false};v.appendChild(A)}document.body.appendChild(v);f.functionGroup.openBlackCover();function e(){v.style.opacity=1;var k=setInterval(function(){var l=v.style.opacity;v.style.opacity=l-0.02;if(l+0.02<=1){document.body.removeChild(v);clearInterval(k);f.functionGroup.closeBlackCover();f.functionGroup.closeSideMenu()}},2)}},cDom:function(b,c,a,d){var e=$("<"+b+">");if(c!=null){e.attr("class",c)}if(a!=null){e.attr("id",a)}if(d!=null){e.html(d)}return e},setMenuLeft:function(a){f.constDom.menu.css.left=a},setBlackCoverOpacity:function(a){f.constDom.black_cover.css.opacity=a},getMenuLeft:function(){return f.constDom.menu.css.left},getBlackCoverOpacity:function(){return f.constDom.black_cover.css.opacity},getMenuWidth:function(){return f.constDom.menu.css.width},getDestinationCookie:function(a){var c=document.cookie;var b=c.split("; ");for(var d=0;d<b.length;d++){var e=b[d].split("=");if(a===e[0]){return e[1]}}return false},blackCoverBindClick:function(a){f.constDom.black_cover.bind(a)},getScrollHeight:function(){var b=0,a=0,c=0;if(document.body){a=document.body.scrollHeight}if(document.documentElement){c=document.documentElement.scrollHeight}b=(a-c>0)?a:c;return b},getWindowHeight:function(){var a=0;if(document.compatMode==="CSS1Compat"){a=document.documentElement.clientHeight}else{a=document.body.clientHeight}return a},getDocumentTop:function(){var a=0,b=0,c=0;if(document.body){b=document.body.scrollTop}if(document.documentElement){c=document.documentElement.scrollTop}a=(b-c>0)?b:c;return a}};var i={userOnloadNextTick:[]};this.functionGroup=h;this.dataGroup=i;this.constDom=new j();g();h.passJct();function j(){var B=document.createElement("div");B.id="_header";var a=document.createElement("div");a.id="_menu";var w=document.createElement("div");w.id="_black_cover";var v=document.createElement("div");v.id="_footer";var y=document.getElementById("app");y.parentNode.insertBefore(w,y);y.parentNode.insertBefore(a,y);y.parentNode.insertBefore(B,y);document.body.appendChild(v);var e,u,x,c,d;if(!h.isPC()){e=innerWidth*0.7;u=-e;x=innerWidth*0.12;c=innerWidth*0.03;d=innerWidth*0.7*0.15}else{d=60;x=innerWidth*0.045;u=-300;e=300;c=18}var t=Vue.extend({template:'<div class="header" id="header"><div class="user-block-open" id="user-block-open"><div class="user-block-open-click" id="user-block-open-click" @click="mouseClick">≡≡</div></div></div>',data:function(){return{}},methods:{mouseClick:function(){h.openSideMenu();h.openBlackCover();h.blackCoverBindClick(function(){h.closeSideMenu();h.closeBlackCover()})}}});var z=Vue.extend({template:'<div class="user-menu" id="user-menu" :style="{left: css.left + \'px\' , width: css.width + \'px\' }"><div class="menu-user-block" id="menu-user-block" style="height:'+x+'px;"><div class="menu-user-block-avatar" id="menu-user-block-avatar" style="width:'+d+"px;height:"+d+'px;"><img id="menu-user-block-avatar-img" class="menu-user-block-avatar-img" :src="user.avatar" style="width: '+d+'px;"></div><div class="menu-user-block-uid" id="menu-user-block-uid"><div class="menu-user-block-uid-txt" id="menu-user-block-uid-txt">|uid : {{user.user_uid}}</div></div><div class="menu-user-block-id" id="menu-user-block-id"><div class="menu-user-block-id-txt" id="menu-user-block-id-txt" v-on="{click: !user.online && goToLogin}">|id : {{user.user_id}}</div></div></div><hr class="menu-user-block-div-line"><div class="menu-func" id="menu-func"><ul class="menu-func-ul" id="menu-func-ul"><li v-for="dep in func"><div class="menu-func-li-btn-block" @click="functionSwitch(dep.func)"><div class="menu-func-li-btn-block-txt">{{dep.name}}</div><div class="menu-func-li-btn-block-about">{{dep.about}}</div></div></li></ul></div></div>',data:function(){return{func:[{name:"回到网站主页",about:"回到那个梦想开始的地方~",func:"index"},{name:"我的主页",about:"字面意思呀，巴拉拉能量让你回到自己的主页！",func:"myIndex"},{name:"发post去",about:"皮皮站，咱们去发博客！",func:"send"},{name:"更新日志",about:"估计你对这个没啥兴趣",func:"updateLog"},{name:"注销",about:"嘤嘤嘤咱要溜了",func:"logOff"}],user:static_data.baseinfo.m_DEFAULT_USER_INFO,css:{left:u,width:e}}},methods:{goToLogin:function(){h.goToLogin()},functionSwitch:function(k){switch(k){case"index":h.goToIndex();break;case"myIndex":h.goToMyIndex();break;case"updateLog":h.closeBlackCover();h.closeSideMenu();h.goToUpdateLog();break;case"logOff":h.logOff();break;case"send":h.goToSendPost();break}}}});var A=Vue.extend({template:'<div class="black-cover" id="black-cover"  :style="{opacity: css.opacity}" @click=mouseClick></div>',data:function(){return{css:{opacity:0},bindCache:[{func:function(){console.log("Event : click #black_cover")},isConst:true}]}},methods:{mouseClick:function(){for(var k in this.bindCache){this.bindCache[k].func()}this.unbind()},unbind:function(){var l=[];for(var k in this.bindCache){if(k.isConst){l.push(this.bindCache[k])}}this.bindCache=l},bind:function(k){var l=typeof k;if(l==="object"){if(typeof k.func==="function"&&(typeof k.isConst==="undefined"||typeof k.isConst==="boolean")){k.isConst=k.isConst?k.isConst:false;this.bindCache.push(k)}else{console.error("Wrong type in function-bind")}}else{if(l==="function"){this.bindCache.push({func:k,isConst:false})}else{console.error("Wrong type in function-bind")}}}}});var b=Vue.extend({template:'<div class="footer" id="footer">'+static_data.baseinfo.m_COPYRIGHT+"</div>",data:function(){return{}},methods:{}});this.header=new t();this.menu=new z();this.black_cover=new A();this.footer=new b();this.header.$mount("#_header");this.menu.$mount("#_menu");this.black_cover.$mount("#_black_cover");this.footer.$mount("#_footer")}function g(){document.title=static_data.getWebTitle()}}function pisert(){return[Date.parse(new Date()),Math.floor(Math.random()*Math.pow(10,5))]};
