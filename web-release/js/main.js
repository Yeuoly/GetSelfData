/**
 *
 * GetSelfData main.js
 * author : SRM_XY Yeuoly
 * Copyright : VSOV-2018-2019
 * Editor by IDEA and VSCODE
 * Thanks to Vue.js
 *
 * */

function InitWeb(){function b(){var j,k,m,n,o,C,D,E,F,f,g,i,l,h=document.createElement("div");h.id="_header",j=document.createElement("div"),j.id="_menu",k=document.createElement("div"),k.id="_black_cover",m=document.createElement("div"),m.id="_footer",n=document.getElementById("app"),n.parentNode.insertBefore(k,n),n.parentNode.insertBefore(j,n),n.parentNode.insertBefore(h,n),document.body.appendChild(m),e.isPC()?(F=60,D=0.045*innerWidth,C=-300,o=300,E=18):(o=0.7*innerWidth,C=-o,D=0.12*innerWidth,E=0.03*innerWidth,F=0.15*0.7*innerWidth),f=Vue.extend({template:'<div class="header" id="header">  <div class="user-block-open" id="user-block-open">   <div  class="user-block-open-click"  id="user-block-open-click" @click="mouseClick"   > ≡≡   </div>  </div> </div>',data:function(){return{}},methods:{mouseClick:function(){e.openSideMenu(),e.openBlackCover(),e.blackCoverBindClick(function(){e.closeSideMenu(),e.closeBlackCover()})}}}),g=Vue.extend({template:'<div   class="user-menu"   id="user-menu"  :style="{left: css.left + \'px\' , width: css.width + \'px\' }" >  <div class="menu-user-block" id="menu-user-block"   style="height:'+D+'px;"  >   <div  class="menu-user-block-avatar"  id="menu-user-block-avatar" style="width:'+F+"px;height:"+F+'px;"   > <img   id="menu-user-block-avatar-img"   class="menu-user-block-avatar-img"   :src="user.avatar"  style="width: '+F+'px;" >   </div>   <div class="menu-user-block-uid" id="menu-user-block-uid"> <div class="menu-user-block-uid-txt" id="menu-user-block-uid-txt">  |uid : {{user.user_uid}} </div>   </div>   <div class="menu-user-block-id" id="menu-user-block-id"> <div class="menu-user-block-id-txt" id="menu-user-block-id-txt" v-on="{click: !user.online && goToLogin}">  |id : {{user.user_id}} </div>   </div>  </div>  <hr class="menu-user-block-div-line">  <div class="menu-func" id="menu-func">   <ul class="menu-func-ul" id="menu-func-ul"> <li v-for="dep in func">  <div class="menu-func-li-btn-block" @click="functionSwitch(dep.func)">   <div class="menu-func-li-btn-block-txt">{{dep.name}}</div>   <div class="menu-func-li-btn-block-about">{{dep.about}}</div>  </div> </li>   </ul>  </div> </div>',data:function(){return{func:[{name:"回到网站主页",about:"回到那个梦想开始的地方~",func:"index"},{name:"我的主页",about:"字面意思呀，巴拉拉能量让你回到自己的主页！",func:"myIndex"},{name:"发post去",about:"皮皮站，咱们去发博客！",func:"send"},{name:"更新日志",about:"估计你对这个没啥兴趣",func:"updateLog"},{name:"注销",about:"嘤嘤嘤咱要溜了",func:"logOff"}],user:static_data.baseinfo.m_DEFAULT_USER_INFO,css:{left:C,width:o}}},methods:{goToLogin:function(){e.goToLogin()},functionSwitch:function(p){switch(p){case"index":e.goToIndex();break;case"myIndex":e.goToMyIndex();break;case"updateLog":e.closeBlackCover(),e.closeSideMenu(),e.goToUpdateLog();break;case"logOff":e.logOff();break;case"send":e.goToSendPost()}}}}),i=Vue.extend({template:'<div   class="black-cover"   id="black-cover"  :style="{opacity: css.opacity}"  @click=mouseClick > </div>',data:function(){return{css:{opacity:0},bindCache:[{func:function(){console.log("Event : click #black_cover")},isConst:!0}]}},methods:{mouseClick:function(){for(var p in this.bindCache){this.bindCache[p].func()}this.unbind()},unbind:function(){var q,p=[];for(q in this.bindCache){q.isConst&&p.push(this.bindCache[q])}this.bindCache=p},bind:function(p){var q=typeof p;"object"===q?"function"!=typeof p.func||"undefined"!=typeof p.isConst&&"boolean"!=typeof p.isConst?console.error("Wrong type in function-bind"):(p.isConst=p.isConst?p.isConst:!1,this.bindCache.push(p)):"function"===q?this.bindCache.push({func:p,isConst:!1}):console.error("Wrong type in function-bind")}}}),l=Vue.extend({template:'<div class="footer" id="footer">'+static_data.baseinfo.m_COPYRIGHT+"</div>",data:function(){return{}},methods:{}}),this.header=new f,this.menu=new g,this.black_cover=new i,this.footer=new l,this.header.$mount("#_header"),this.menu.$mount("#_menu"),this.black_cover.$mount("#_black_cover"),this.footer.$mount("#_footer")}function c(){document.title=static_data.getWebTitle()}var d=this,e={isOnline:function(){return d.constDom.menu.user.online},openBlackCover:function(){var f=document.getElementById("black-cover");f.style.setProperty("z-index","2"),f.style.setProperty("opacity","0.6")},closeBlackCover:function(){var f=document.getElementById("black-cover");f.style.setProperty("opacity","0"),setTimeout(function(){f.style.setProperty("z-index","-1")},500)},openSideMenu:function(){var f=document.getElementById("user-menu");f.style.setProperty("transform","translateX(300px)"),setTimeout(function(){f.style.setProperty("box-shadow","2px 0px 1px rgb(173, 150, 150)")})},closeSideMenu:function(){var f=document.getElementById("user-menu");f.style.setProperty("transform","translateX(0px)"),setTimeout(function(){f.style.setProperty("box-shadow","0px 0px 0px rgb(173, 150, 150)")},500)},goToIndex:function(){location.href=static_data.getUrlPath("",static_data.m_URL_DOMAIN_WEB_DIR)},goToMyIndex:function(){location.href=static_data.getUrlPath("msg.html",static_data.m_URL_DOMAIN_WEB_DIR)},goToUpdateLog:function(){document.location.href===static_data.getUrlPath("",static_data.m_URL_DOMAIN_WEB_DIR)||document.location.href===static_data.getUrlPath("index.html",static_data.m_URL_DOMAIN_WEB_DIR)?e.smoothScrollMove("updates-log-list"):document.location=static_data.getUrlPath("#updates-log-list",static_data.m_URL_DOMAIN_WEB_DIR)},goToLogin:function(){location.href=static_data.getUrlPath("passport.html",static_data.m_URL_DOMAIN_WEB_DIR)},goToSendPost:function(){location.href=static_data.getUrlPath("operate/editor-post.html",static_data.m_URL_DOMAIN_WEB_DIR)},smoothScrollMove:function(f){$("html,body").animate({scrollTop:$("#"+f).offset().top},200)},logOff:function(){d.constDom.menu.user.online&&$.ajax({url:static_data.getUrlPath("LogOff.php",static_data.m_URL_DOMAIN_API_DIR),async:!0,type:"get",dataType:"json",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0},success:function(f){f.data.res===static_data.response.passjct.success&&e.clearUserInfo()}})},setUserInfo:function(f,g){d.constDom.menu.user[f]=g},setUserInfoArray:function(f){for(var g in f){d.functionGroup.setUserInfo(g,f[g])}},clearUserInfo:function(){d.constDom.menu.user={user_id:"未登录，点击登录",user_uid:"-1",user_email:"example@google.com",user_lv:"0",user_exp:"0",user_class:"",avatar:"http://hbimg.b0.upaiyun.com/a12f24e688c1cda3ff4cc453f3486a88adaf08cc2cdb-tQvJqX_fw658",srm_jct:"",login_time:"0",online:!1}},passJct:function(){var f=this;$.ajax({url:static_data.getUrlPath("User.php",static_data.m_URL_DOMAIN_API_DIR),async:!0,type:"post",dataType:"json",contentType:"application/x-www-form-urlencoded",xhrFields:{withCredentials:!0},success:function(g){var h,i;if(g.data.res===static_data.response.passjct.success){f.setUserInfoArray(g.data.data),f.setUserInfo("online",!0),f.setUserInfo("avatar",static_data.getUrlPath("avatar/"+g.data.data["user_uid"]+".jpg",static_data.m_URL_DOMAIN_IMG_DIR)),h=$("#menu-user-block-id-txt"),h.css("cursor","default");for(i in a.userOnloadNextTick){a.userOnloadNextTick[i]()}}}})},bindUserOnloadNextTick:function(f){"function"==typeof f?a.userOnloadNextTick.push(f):console.error("userOnloadNextTick : wrong type")},unbindUserOnloadNextTick:function(){a.userOnloadNextTick=[]},getUserInfo:function(f){return"undefined"==typeof f?d.constDom.menu.user:"undefined"!=typeof d.constDom.menu.user[f]?d.constDom.menu.user[f]:(console.error("illegal index in getUserInfo(index)"),void 0)},isPC:function(){var g,h=navigator.userAgent,i=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],f=!0;for(g=0;g<i.length;g++){if(h.indexOf(i[g])>0){f=!1;break}}return f},getParamsArray:function(){var i,j,q,f,g=document.location.toString(),h=g.split("?")[1];if("undefined"!=typeof h){i=h.split("&"),j=[];for(q in i){f=i[q].split("="),j[f[0]]=f[1],j.length++}return j}},alertBox:function(i,k){function j(){z.style.opacity=1;var p=setInterval(function(){var q=z.style.opacity;z.style.opacity=q-0.02,1>=q+0.02&&(document.body.removeChild(z),clearInterval(p),d.functionGroup.closeBlackCover(),d.functionGroup.closeSideMenu())},2)}var l,m,n,o,z,f,g,h;i=i||"",k=k||0,l=document.body.scrollTop||document.documentElement.scrollTop,m=document.all?!0:!1,m&&!window.XMLHttpRequest,document.documentElement.scrollTop||document.body.scrollTop,document.documentElement.scrollLeft||document.body.scrollLeft,n=function(){var q,r,t,s,u,p;return window.innerHeight&&window.scrollMaxY?(q=document.body.scrollWidth,r=window.innerHeight+window.scrollMaxY):document.body.scrollHeight>document.body.offsetHeight?(q=document.body.scrollWidth,r=document.body.scrollHeight):(q=document.body.offsetWidth,r=document.body.offsetHeight),self.innerHeight?(t=self.innerWidth,s=self.innerHeight):document.documentElement&&document.documentElement.clientHeight?(t=document.documentElement.clientWidth,s=document.documentElement.clientHeight):document.body&&(t=document.body.clientWidth,s=document.body.clientHeight),p=s>r?s:r,u=t>q?t:q,{pageWidth:u,pageHeight:p,windowWidth:t,windowHeight:s}}(),o="display:block;position:fixed;_position:absolute;left:"+(n.windowWidth/2-200)+"px;top:"+(n.windowHeight/2-150)+"px;_top:"+(n.windowHeight/2+l-150)+"px;",z=document.createElement("div"),z.id="alertMsg",z.style.cssText=o,f=document.createElement("P"),f.id="alertMsg_info",f.innerHTML=i,z.appendChild(f),g=document.createElement("a"),g.id="alertMsg_btn1",g.href="javascript:void(0)",g.innerHTML="<cite>确定</cite>",g.onclick=function(){return j(),!0},z.appendChild(g),1===k&&(h=document.createElement("a"),h.id="alertMsg_btn2",h.href="javascript:void(0)",h.innerHTML="<cite>取消</cite>",h.onclick=function(){return j(),!1},z.appendChild(h)),document.body.appendChild(z),d.functionGroup.openBlackCover()},cDom:function(g,h,i,j){var f=$("<"+g+">");return null!=h&&f.attr("class",h),null!=i&&f.attr("id",i),null!=j&&f.html(j),f},setMenuLeft:function(f){d.constDom.menu.css.left=f},setBlackCoverOpacity:function(f){d.constDom.black_cover.css.opacity=f},getMenuLeft:function(){return d.constDom.menu.css.left},getBlackCoverOpacity:function(){return d.constDom.black_cover.css.opacity},getMenuWidth:function(){return d.constDom.menu.css.width},getDestinationCookie:function(g){var j,f,h=document.cookie,i=h.split("; ");for(j=0;j<i.length;j++){if(f=i[j].split("="),g===f[0]){return f[1]}}return !1},blackCoverBindClick:function(f){d.constDom.black_cover.bind(f)},getScrollHeight:function(){var g=0,h=0,f=0;return document.body&&(h=document.body.scrollHeight),document.documentElement&&(f=document.documentElement.scrollHeight),g=h-f>0?h:f},getWindowHeight:function(){var f=0;return f="CSS1Compat"===document.compatMode?document.documentElement.clientHeight:document.body.clientHeight},getDocumentTop:function(){var g=0,h=0,f=0;return document.body&&(h=document.body.scrollTop),document.documentElement&&(f=document.documentElement.scrollTop),g=h-f>0?h:f}},a={userOnloadNextTick:[]};this.functionGroup=e,this.dataGroup=a,this.constDom=new b,c(),e.passJct()}function pisert(){return[Date.parse(new Date),Math.floor(Math.random()*Math.pow(10,5))]};
